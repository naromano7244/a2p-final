<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>A2P Compliance Guide</title>

  <!-- Perf hints -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://script.google.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    *{box-sizing:border-box}
    :root{
      --primary:#5c27d4; --primary-2:#6e3de8; --primary-light:#f3efff;
      --text:#2d3748; --muted:#667085; --border:#e2e8f0;
      --success:#48bb78; --shadow-sm:0 2px 4px rgba(0,0,0,.05);
      --shadow-md:0 6px 22px rgba(0,0,0,.09); --r-md:12px; --r-sm:8px;
    }
    body{font-family:Inter,system-ui,-apple-system,"Segoe UI",sans-serif;margin:0;background:#f7f7fa;color:var(--text);line-height:1.6}
    .container{max-width:900px;margin:36px auto;background:#fff;border-radius:var(--r-md);box-shadow:var(--shadow-md);overflow:hidden}
    @media (max-width:940px){.container{margin:18px}}
    .header{background:linear-gradient(135deg,var(--primary),var(--primary-2));color:#fff;text-align:center;padding:36px 20px}
    .header h1{margin:0;font-size:28px;font-weight:700}
    .header p{margin:12px 0 0;font-size:15.5px;opacity:.95}

    .disclosure{background:#fff3cd;color:#7a5a00;border:1px solid #ffe08a;border-radius:8px;padding:10px 16px;margin:18px 24px 0;text-align:center;font-size:14px}

    .section{padding:28px;border-top:1px solid var(--border)}
    h2{font-size:20px;margin:0 0 16px;color:var(--primary)}

    pre{background:#f8fafc;padding:16px;border-radius:8px;white-space:pre-wrap;word-break:break-word;font:13.5px ui-monospace,Menlo,monospace;border:1px solid var(--border)}
    .copy-btn{background:var(--primary);color:#fff;border:0;padding:8px 14px;font-size:13.5px;border-radius:8px;cursor:pointer;margin-top:8px}
    .copy-btn:hover{opacity:.9}

    .soft-card{background:#f9f9ff;border:1px solid #e9e3ff;border-radius:12px;padding:16px}
    .site-link{font-weight:700;color:var(--primary);text-decoration:none}
    .site-link:hover{text-decoration:underline}

    .pdf-section{background:var(--primary-light);text-align:center;padding:32px}
    .pdf-button{background:var(--primary);color:#fff;padding:11px 20px;border-radius:8px;font-weight:600;text-decoration:none}
  </style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>üßô‚Äç‚ôÇÔ∏è Just like magic!<br>Your A2P Compliance Kit is Ready!</h1>
    <p>Everything you need to submit your brand and campaign correctly.</p>
  </div>

  <div class="disclosure">
    ‚ö†Ô∏è If your campaign was previously rejected, recreate and resubmit a new campaign for best results.
  </div>

  <!-- Start Here -->
  <div class="section">
    <h2>üöÄ Start Here</h2>
    <div class="soft-card">
      <p><strong>Your custom-built, domain-matched compliance website is ready.</strong></p>
      <p class="muted">Use the copy & paste sections below exactly as shown.</p>
      <p>üåê Website:
        <a id="siteLinkA" class="site-link" href="#" target="_blank">Loading‚Ä¶</a>
      </p>
    </div>
  </div>

  <!-- Instructions -->
  <div class="section">
    <h2>üìå Instructions</h2>
    <div class="soft-card">
      <p>
        Make sure to <strong>register the brand and campaign using the output below</strong>.
      </p>
      <p>
        You <strong>must</strong> register the brand with the
        <strong>website shown in this output</strong> or you will likely face a
        campaign rejection <strong>~50% of the time</strong>.
      </p>
    </div>
  </div>

  <div class="section">
    <h2>üìÉ Use Case Description</h2>
    <pre id="useCase">Loading‚Ä¶</pre>
    <button class="copy-btn" onclick="copyText('useCase')">Copy</button>
  </div>

  <div class="section">
    <h2>üí¨ Sample Messages</h2>
    <pre id="msg1">Loading‚Ä¶</pre>
    <button class="copy-btn" onclick="copyText('msg1')">Copy</button>
    <pre id="msg2" style="margin-top:12px">Loading‚Ä¶</pre>
    <button class="copy-btn" onclick="copyText('msg2')">Copy</button>
  </div>

  <div class="section">
    <h2>‚úÖ How do Contacts Opt-in?</h2>
    <pre id="consentCopy">Loading‚Ä¶</pre>
    <button class="copy-btn" onclick="copyText('consentCopy')">Copy</button>
  </div>

  <div class="section">
    <h2>üìú Opt-In Message</h2>
    <pre id="optInMessage">Loading‚Ä¶</pre>
    <button class="copy-btn" onclick="copyText('optInMessage')">Copy</button>
  </div>

  <div class="section">
    <h2>‚úÖ Final Step: HighLevel Opt-In URL</h2>
    <pre id="optInFormUrl">Loading‚Ä¶</pre>
    <button class="copy-btn" onclick="copyText('optInFormUrl')">Copy</button>
  </div>

  <div class="pdf-section">
    <h3>Need to send this to a client?</h3>
    <a href="#" onclick="window.print()" class="pdf-button">Download PDF</a>
  </div>
</div>

<script>
const API_BASE = "https://script.google.com/macros/s/AKfycbxc0m07Q1u1c3JyyKAKTdYvmrkj6C9UxdI-wjIZM7b0uidEreM-G31Ub3LQCObmhiIs/exec";
const SITE_DOMAIN = "nebulabrandgroup.com";
const $ = id => document.getElementById(id);

function buildWebsite(slug){
  if(!slug) return "";
  return `https://${slug.toLowerCase()}.${SITE_DOMAIN}`;
}

async function init(){
  const params = new URLSearchParams(location.search);
  const slug = params.get("slug");
  const id = params.get("id");
  const q = slug || id;
  if(!q) return;

  const res = await fetch(API_BASE + (slug ? "?slug=" : "?id=") + q);
  const data = await res.json();

  const bn = data["Legal Business name"] || "Client Business";
  const website = buildWebsite(data["Slug"]);

  $("siteLinkA").textContent = website;
  $("siteLinkA").href = website;

  $("useCase").textContent =
`This campaign sends appointment confirmation and reminder messages to customers who have booked with ${bn} on ${website} and opted-in to receive SMS notifications.`;

  $("msg1").textContent =
`Hi John! This is Mark from ${bn}. Your appointment is confirmed. Reply STOP to unsubscribe.`;

  $("msg2").textContent =
`Hello, this is Jason with ${bn}. We are confirming your appointment tomorrow. Reply STOP to cancel.`;

  $("consentCopy").textContent =
`End users opt-in by visiting ${website} and submitting a form with explicit SMS consent.`;

  $("optInMessage").textContent =
`You have successfully opted in to receive SMS messages from ${bn}. Reply STOP to opt out.`;

  $("optInFormUrl").textContent = website + "/contact";
}

function copyText(id){
  navigator.clipboard.writeText($(id).textContent.trim());
}

init();
</script>

</body>
</html>


